# Render service spec for this Next.js app
services:
  - type: web
    name: iemrfsite1
    env: node
    plan: starter
    region: oregon
    
    # Updated build command for pnpm 10
    buildCommand: |
      corepack enable
      corepack prepare pnpm@latest --activate
      pnpm install
      pnpm build
    
    startCommand: pnpm start
    
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_VERSION
        value: 18.x
    
    autoDeploy: true
    pullRequestPreviews: false
    branch: main
    healthCheckPath: /

    # Auto-deploy settings
    autoDeploy: true
    pullRequestPreviews: false

    # Branch settings
    branch: main

    # Advanced settings
    disk:
      name: data
      mountPath: /data
      sizeGB: 1

    # Build filters (optional)
    buildFilter:
      paths:
        - src/**
        - public/**
        - package.json
        - pnpm-lock.yaml
        - next.config.js
        - tsconfig.json
        - tailwind.config.ts
